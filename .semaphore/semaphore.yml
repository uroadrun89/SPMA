version: v1.0
name: Song Downloader Bot CI
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu2004
blocks:
  - name: Build Docker Image
    task:
      jobs:
        - name: Build Docker Image
          commands:
            - 'echo "Current Directory:"'
            - pwd
            - 'echo "Directory Contents:"'
            - ls -al
            - echo "Building Docker Image..."
            - docker --version
            - docker build -t song-downloader-bot .
            - 'echo "Docker Images:"'
            - docker images
  - name: Run Docker Container
    task:
      jobs:
        - name: Run Docker Container
          commands:
            - echo "Running Docker Container..."
            - 'docker run -d -p 80:80 song-downloader-bot'
  - name: Cleanup
    task:
      jobs:
        - name: Cleanup Job
          commands:
            - echo "No cleanup needed"
