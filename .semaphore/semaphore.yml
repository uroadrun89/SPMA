version: v1.0
name: ''
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu2004
blocks:
  - name: Build and Test
    task:
      jobs:
        - name: Checkout code
          commands:
            - checkout
        - name: Install dependencies
          commands:
            - 'git clone https://github.com/uroadrun89/SPMA.git'
            - cd SPMA
            - pip install -r requirements.txt
            - python main.py
  - name: Run Python Script
    task:
      env_vars:
        - name: TELEGRAM_TOKEN
          value: '${6953211957:AAE2rdKtITo6qVLjd_tF657pKz9-tj9EiNM}'
      jobs:
        - name: Run main script
          commands:
            - python3.10 main.py
